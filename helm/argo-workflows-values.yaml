singleNamespace: false

workflow:
  serviceAccount:
    create: true
# Controller
controller:
  metricsConfig:
    enabled: true
  serviceMonitor:
    enabled: true
    additionalLabels:
      app: argo-workflows
    labels:
      release: kps

  # -- enable Workflow Archive to store the status of workflows. Postgres and MySQL (>= 5.7.8) are available.
  ## Ref: https://argo-workflows.readthedocs.io/en/stable/workflow-archive/
  persistence: {}
  # connectionPool:
  #   maxIdleConns: 100
  #   maxOpenConns: 0
  # # save the entire workflow into etcd and DB
  # nodeStatusOffLoad: false
  # # enable archiving of old workflows
  # archive: false
  # postgresql:
  #   host: localhost
  #   port: 5432
  #   database: postgres
  #   tableName: argo_workflows
  #   # the database secrets must be in the same namespace of the controller
  #   userNameSecret:
  #     name: argo-postgres-config
  #     key: username
  #   passwordSecret:
  #     name: argo-postgres-config
  #     key: password
  #   ssl: true
  #   # sslMode must be one of: disable, require, verify-ca, verify-full
  #   # you can find more information about those ssl options here: https://godoc.org/github.com/lib/pq
  #   sslMode: require
  workflowNamespaces:
    - default
    - workflows
    - events

server:
  authModes:
    - sso
  ingress:
    enabled: true
    hosts:
      - argoworkflows.sith.network
      - wf.sith.network
    paths:
      - /
    tls:
      - hosts:
          - argoworkflows.sith.network
          - wf.sith.network

  sso:
    enabled: true
    issuer: https://dex.sith.network/dex
    clientId:
      name: argo-wf-sso
      key: client-id
    clientSecret:
      name: argo-wf-sso
      key: client-secret
    redirectUrl: "https://argoworkflows.sith.network/oauth2/callback"
    rbac:
      enabled: false
      scopes:
        - openid
        - profile
        - email
    sessionExpiry: 240h

artifactRepository:
  archiveLogs: true

  s3:
    bucket: argo-workflows
    endpoint: s3.sith.network:9000
    insecure: true                
    region: us-east-1             
    accessKeySecret:
      name: minios3
      key: access_key
    secretKeySecret:
      name: minios3
      key: secret_key

